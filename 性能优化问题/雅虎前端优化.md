[TOC]

#一、Content

##1.减少http请求

到终端用户的响应时间80%花在前端，大部分用于下载组件（js，css，image，flash等），
<br>减少组件数就是减少渲染页面所需的http请求数,这是更快界面的关键
<br>减少组件数的一些方法就是简化界面设计；保留富内容的页面且能减少http请求，

**减少请求数是为第一次访问页面的用户提高性能的最重要指导**

* combined files 合并文件 合并js，合并css都能减少http请求，如果页面间脚本和样式差异很大，合并会更具挑战性
* css sprites 合并多个背景图片，通过background-image background-position
* image maps 
* inline images url('data:image/png;base64,......') no-repeat scroll ;

##2.减少DNS查询
**避免dns查询则应该将所有东西都放在同一域名中，但是这样就减少了并行（不同服务器并行）下载数**

因此组件分散放在2-4个不同域名中较妥
##3.避免跳转
##4.让ajax可缓存（？）
异步请求不保证用户等待的时间——异步不意味着瞬时
##5.延迟加载组件


1. 页面初始化时必须的，其余内容和组件可以延迟，
2. js可以切分到onload时间之前和之后。比如拖放的js库可以延迟，因为拖动必须在页面初始化之后。其他可延迟的包括隐藏内容，折叠起来的图片等

##6.预加载组件
1. 利用浏览器的空闲时间来请求你将来会用到的组件，当用户访问下一个界面时，你会有更多的组件已经在缓存中
2. 预加载方法：onload触发后立即获取其他组件；基于用户动作，推测用户下一步会去哪里加载相应组件；
##7.减少dom数
1. 复杂的页面意味着更多内容要下载，更慢的dom访问，
##8.将组件分散到不同的域名
1. 最大化并行下载数
##9.最小化iframe的数量
1. iframe允许html文档插入到父文档
2. 优点：解决缓慢的第三方内容的加载，如广告和徽章；安全沙盒；并行下载脚本
3. 缺点：即便是空的也消耗时间，阻塞界面的onload事件；费语义化
4. ​
##10.不要404
#二、server
#三、cookie
#四、css
##1.把样式放在顶部head中
允许页面逐步渲染
##2.避免css表达式
##3.使用link而不是import
##4.避免使用过滤器IE
#五、js
##1.脚本放在底部
脚本会阻止并行下载，简易浏览器每个域名下不要一次下载超过2个组件，
**如果图片分散在不同服务器，则可以并行下载多个图片，但当脚本在下载，浏览器不会下载其他组件，即使在不同域名下**
##2.使用外部js和css
##3.压缩js和css
##4.删除重复脚本
##5.最小化dom访问

用JS访问DOM元素是缓慢的，所以为了响应更好的页面，你应该：

* 缓存访问过的元素的引用
* 在DOM树外更新节点，然后添加到DOM树
* 避免用JS实现固定布局


##6.开发聪明的事件处理
有时候页面看起来不那么响应（响应速度慢），是因为绑定到不同元素的大量事件处理函数执行太多次。这是为什么使**事件委托**是一种好方法。

另外，你不必等到**onload事件来开始处理DOM树，DOMContentLoaded更快**。大多时候你需要的只是想访问的元素已在DOM树中，所以你不必等到所有图片被下载。

#六、img
##1.优化图片

* 检查gif图片的调色板大小是否匹配图片颜色数。
* 可以把gif转成png看看有没有变小。除了动画，gif一般可以转成png8。
* 运行pngcrush或其它工具压缩png。
* 运行jpegtran或其它工具压缩jpeg。


##2.优化css雪碧图


* 把图片横向合并而不是纵向，横向更小。
* 把颜色近似的图片合并到一张雪碧图，这样可以让颜色数更少，如果低于256就可以用png8.
* "Be mobile-friendly"并且合并时图片间的间距不要太大。这对图片大小影响不是太大，但客户端解压时需要的内存更少。100×100是10000个像素，1000×1000是1000000个像素。

##3.不在html中缩放图片
不要因为你可以设置图片的宽高就去用比你需要的大得多的图片。如果你需要
	img width="100" height="100" src="mycat.jpg" alt="My Cat" 

那么，就用100x100px的图片，而不是500x500px的。

##4.favicon小且缓存
favicon.ico是在你服务器根路径的图片。邪恶的是即使你不关心它，浏览器仍然会请求它。所以最好不要响应404。另外由于在同一服务器，每次请求favicon.ico时也会带上cookie。这个图片还会影响下载顺序，比如在IE，如果你在onload时下载额外的组件，fcvicon会在这些组件之前被下载。
怎么减轻favicon.ico的缺点？

* 小，最好1K以下
* 设置Expires头部。也许可以安全地设置为几个月。


#七、mobile
##1.保持组件小于25k
保持组件小于25K
这个限制与iPhone不缓存大于25K的组件相关。注意，这是非压缩（uncompressed）的文件大小。在这里minification（压缩，不要与compress混淆）很重要，因为gzip无法满足（iPhone）

##2.打包组件到一个多部文档
打包组件到一个多部父文档
打包组件到一个多部父文档类似于带附件的邮件。它帮助你在一个http请求中获取多个组件，但注意，iPhone不支持。
