#

#一、缓存分类
* 数据库缓存 

* 系统缓存  缓解DNS解析压力，提高解析响应速度
* 代理服务器缓存
* CDN缓存
* 浏览器缓存 将文件缓存在客户端，在同一个回话过程中会检查缓存的副本是否足够新，后退网页时，访问过的资源都可以从浏览器缓存中拿出使用，减少服务器处理请求的数量

浏览器向代理服务器发起web请求，再将请求转发到源服务器。

#二、缓存的特点
##时间局限性
* 时间缀，具有定期失效的特征
* 数据访问后，数据往往会短时间内被访问到
##空间局限性
* 访问数据周边数据概率大
##优点
* 节约带宽  降低时延


#三、浏览器缓存
页面的缓存状态由

> header决定，header的参数四种：

##1.Expires 指定过期时间
Expires=max-age + 请求时间 
###缺点
expires中的缓存时间相对于服务器上的时间而言，
 **cachecontrol的优先级更高，需要和last-modified结合使用**
##2.cache-control

###max-age 设置缓存最大的有效时间
浏览器发送请求后，在max-age这段时间里浏览器就不会再向服务器发送请求了。**max-age会覆盖掉expires**，即使服务器上的资源发生了**变化，浏览器也不会通知**。
###s-maxage 同max-age,只用于共享缓存
s-maxage会覆盖max-age和expires
###public
缓存再多用户间共享 默认public
###private
###no-cache 不缓存响应，资源不进行缓存
* 不直接使用缓存，向服务器端发起新鲜度验证请求
* no-cache 就不能和 max-age、min-fresh、max-stale 一起搭配使用
###no-store
不缓存
###must-revalidate
若页面过期，取服务器获取
###缺点
不能及时获取是否文件发生改变，因此添加了下面的新首部字段
##3.last-modified
服务器端作后修改的时间，**需要和cache-control共同使用**，检查服务器端资源是否更新，当浏览器再次请求时，会向服务器传送**If-Modied-Since报**头，询问是否被修改过，没有修改返回304，使用缓存，修改过，则重新请求资源。

##4.e-tag
根据内容生成一段hash字符串，标识资源的状态，服务端产生
if-none-match：EtagName

**如果 Last-Modified 和 ETag 同时被使用，则要求它们的验证都必须通过才会返回304，若其中某个验证没通过，则服务器会按常规返回资源实体及200状态码**

###优点
* 某些服务器不能精确得到资源的最后修改时间，这样就无法通过最后修改时间判断资源是否更新 
* 如果资源修改非常频繁，在秒以下的时间内进行修改，而Last-modified只能精确到秒 
* 一些资源的最后修改时间改变了，但是内容没改变，使用ETag就认为资源还是没有修改的。******
