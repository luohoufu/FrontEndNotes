##一、XSS 跨站脚本攻击 cross site script
1.**安全漏洞攻击**，代码注入的一种。他允许用户恶意将代码注入到网页上，其他用户观看网页是会受到影响，**这类攻击通常包含了html以及用户脚本语言**

特点：不对服务器造成任何伤害，而是通过一些正常的站内交互途径，例如发布评论，**提交含有js的内容文本。**

此时如果服务器端**没有过滤或转义掉这些脚本**，作为内容**发布**到页面上，其他用户访问这个界面的时候就会**运行这些脚本**

* 运行的js脚本可能会帮助攻击者手机用户的cookie，并提交这些参数到自己的服务器上，
* ​
###2.防御方法
![](https://segmentfault.com/image?src=http://p1.bqimg.com/567571/1118c14e7f1bab75.png&objectId=1190000007752362&token=6c7975444d224f5c469e957476fc20f5)

###3.潜在问题
* 在DOM中插入html内容会有潜在的安全问题，**不如修改css，引入js等有权限操作页面的内容**
* 解决方案：过滤任何有执行能力的脚本或者影响界面的css
  ![](https://segmentfault.com/image?src=http://p1.bpimg.com/567571/68bb369accc2edb3.png&objectId=1190000007752362&token=2e7e9d859ad13460317c1dc069e822ae)
  原理： 进行编码

###4.防御XSS原则，如何在正确的地方使用正确的编码

* 不在页面中插入任何不可信的数据，除非他们经过了编码
* 不可信数据插入到html标签之间，HTML ENtity编码html属性，css，script


##二、CSRF跨站请求伪造cross site request forgery
###1.攻击者盗用身份，发送恶意请求
###2.原理
* 登录网站时，因为http是无状态的，为了保存我们的登录状态，**服务器中的程序必须创建session文件**，保存登录信息
* 为了能够在多个页面互相切换访问之间，记录状态，服务端首先会将一个相应的session文件对应的session_id发送给客户端浏览器。浏览器写入cookie文件中。
* 当下一次访问该网站时，客户端就会发送cookie给服务端。**服务端通过这个来验证请求者的身份**，跟本地的session文件比对，检测是否合法，检测合法则验证身份。
* 若黑客设置连接，连接表示请求，此网站域的转账系统。并且用户处于登录状态，那么用户点击了连接之后，
  ![](http://pic002.cnblogs.com/img/hyddd/200904/2009040916453171.jpg)

源于web的隐式身份验证机制，web的身份验证机制虽然可以保证一个请求来自于**用户的浏览器**，却无法保证该请求使**用户批准发送**的

###3.服务器端防御
* 在客户端页面**增加伪随机数**，该站点应该生成一个伪随机值，并在用户计算机上将其设置为cookie，每个提交的表单都应包含cookie值。攻击者提交表单时，只能修改表单的值，但**不能读取任何读取cookie的值**。 
* 不同表单包含不同的为随机数
* 当然还输入**验证码**
* 遵循标准的GET动作，只允许get请求数据，不可以get修改数据

###4.客户端防御